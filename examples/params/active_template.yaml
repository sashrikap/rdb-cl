RANDOM_KEYS: [0]
# FIXED_TASK_SEED: null

# ENV_NAME: Week6_02-v1
# ENV_NAME: Week6_01-v1
ENV_NAME: Week6_04-v1

## MPC Specific
IRD_CONTROLLER_ARGS:
  horizon: 10
  replan: 5
  engine: jax
  method: adam
  # engine: scipy
  # method: lbfgs

DESIGNER_CONTROLLER_ARGS:
  horizon: 10
  replan: 5
  engine: jax
  method: adam
  # engine: scipy
  # method: lbfgs


## Saving
# Full sampling
SAVE_NAME: 201007
#EXP_NAME: active_ird_6feat_indep_init_4v1_ibeta_6_dbeta_0.1
# EXP_NAME: active_ird_6feat_indep_init_1v1_ibeta_6_dbeta_0.1_eval_mean
# EXP_NAME: active_ird_6feat_indep_init_2v1_ibeta_6_dbeta_0.1_eval_mean
EXP_NAME: active_ird_6feat_indep_init_2v1_ibeta_6_dbeta_0.1_eval_mean
# EXP_NAME: active_ird_test_initial_1


EXP_ARGS:
  eval_method: mean
  num_eval: 64
  num_eval_tasks: 500
  # eval_method: post_mean
  # num_eval_tasks: 4096
  obs_true: False
  eval_env_name: Week6_02-v1
  iterations: 10
  num_active_tasks: 72
  num_active_sample: 500
  eval_seed: 0
  num_prior_tasks: 0
  #num_initial_tasks: 4
  num_initial_tasks: 2
  initial_tasks_seed: 0
  # initial_tasks_file: null
  initial_tasks_file: Week6_04_2v1
  # initial_tasks_file: Week6_04_2v2
  # initial_tasks_file: Week6_04_2v3
  separate_save: False
## Designer Settigns
DESIGNER_ARGS:
  task_method: mean
  num_normalizers: 3000
  # use_true_w: True
  use_true_w: False
  sample_method: MH
  design_mode: independent
  # design_mode: joint
  select_mode: mean
  sample_init_args:
    # proposal_var: 0.1
    # proposal_var: 0.3 # beta = 1
    # proposal_var: 1.5 # beta = 0.1
    proposal_var: 2 # beta = 0.05
    # proposal_var: 1
  proposal_decay: 0.7
  max_val: 15.0
  sample_args:
    num_samples: 250
    num_warmup: 25
    num_chains: 1
  beta: 0.1
## IRD Settings
IRD_ARGS:
  task_method: sum
  sample_method: MH
  sample_init_args:
    proposal_var: 3 # beta=4
    # proposal_var: 1
  proposal_decay: 0.7
  max_val: 15.0
  beta: 1
  sample_args:
    num_warmup: 200
    num_samples: 40000
    num_chains: 3
EVAL_ARGS:
  parallel: True
  num_eval_workers: 2
  num_active_workers: 2
  max_batch: 500
  risk_averse: False
# ACTIVE_FNS: [random]
#ACTIVE_FNS: [infogain, ratiomean, ratiomin, difficult, random]
#ACTIVE_FNS: [infogain, random, difficult, ratiomean]
ACTIVE_FNS: [infogain, random, difficult]




# ## Saving
# SAVE_NAME: 200927
# EXP_NAME: active_ird_test



# ## Testing
# EXP_ARGS:
#   eval_method: map
#   num_eval: 12
#   num_eval_tasks: 50
#   # eval_method: post_mean
#   # num_eval_tasks: 4096
#   obs_true: False
#   eval_env_name: Week6_02-v1
#   iterations: 10
#   num_active_tasks: 22
#   num_active_sample: 50
#   eval_seed: 0
#   num_prior_tasks: 0
#   num_initial_tasks: 4
#   designer_mode: importance
#   initial_tasks_seed: 0
#   # initial_tasks_file: null
#   initial_tasks_file: Week6_04_4v1
#   separate_save: False
# ## Designer Settigns
# DESIGNER_ARGS:
#   task_method: mean
#   num_normalizers: 30
#   # use_true_w: True
#   use_true_w: False
#   sample_method: MH
#   design_mode: independent
#   # design_mode: joint
#   select_mode: mean
#   sample_init_args:
#     # proposal_var: 0.1
#     # proposal_var: 0.3 # beta = 1
#     # proposal_var: 1.5 # beta = 0.1
#     proposal_var: 2 # beta = 0.05
#     # proposal_var: 1
#   proposal_decay: 0.7
#   max_val: 15.0
#   beta: 0.02
# ## IRD Settings
# IRD_ARGS:
#   task_method: sum
#   sample_method: MH
#   sample_init_args:
#     proposal_var: 3 # beta=4
#     # proposal_var: 1
#   proposal_decay: 0.7
#   max_val: 15.0
#   beta: 6
#   sample_args:
#     num_warmup: 200
#     num_samples: 40000
#     num_chains: 3
# EVAL_ARGS:
#   risk_averse: False
#   parallel: True
#   num_eval_workers: 2
#   num_active_workers: 2
#   max_batch: 500
# ACTIVE_FNS: [infogain, random]
# #ACTIVE_FNS: [infogain, ratiomean, ratiomin, difficult, random]
# #ACTIVE_FNS: [infogain, random, difficult, ratiomean]
# #ACTIVE_FNS: [infogain, random, difficult]




## Plotting & weight scaling
WEIGHT_PARAMS:
  normalized_key: __dummy__
  max_weights: 15.0
  bins: 200
  feature_keys:
  - dist_cars
  - dist_lanes
  - dist_fences
  - dist_objects
  - speed_80
  - control

# ## True w1 (602)
# TRUE_W:
#     control: 0.2
#     dist_cars: 2.0
#     dist_fences: 5.35
#     dist_lanes: 2.5
#     dist_objects: 2.25
#     speed: 5
#     speed_over: 80

# ## True w1 (604)
# TRUE_W:
#     dist_cars: 1.0
#     neg_dist_far_lanes: 5.2
#     dist_lanes: 1.25
#     dist_far_lanes: 0.001
#     dist_mid_lanes: 0.001
#     neg_dist_lanes: 0.001
#     neg_dist_far_lanes: 0.5
#     dist_fences: 2.675
#     dist_objects: 1.125
#     speed_80: 2.5
#     speed_90: 0.001
#     speed_70: 0.001
#     speed_60: 0.001
#     speed_over: 40.0
#     control_throttle: 4.
#     control: 2.

## True w1 (604 simplified)
TRUE_W:
    dist_cars: 1.0
    dist_lanes: 1.25
    dist_fences: 2.675
    dist_objects: 1.125
    speed_80: 2.5
    control: 2.

# ## True w2 (602)
# TRUE_W:
#   control: 0.00139391
#   dist_cars: 1.0
#   dist_fences: 553868.0364333
#   dist_lanes: 1.37518065
#   dist_objects: 1.07794985
#   speed: 2.47229896
#   speed_over: 170733.57166919
